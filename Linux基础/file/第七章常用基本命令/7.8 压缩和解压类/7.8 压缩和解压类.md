# 7.8 压缩和解压类

### 7.8.1 gzip/gunzip 压缩

gzip命令来自于英文单词gunzip的缩写，其功能是用于压缩和解压文件。gzip是一款使用广泛的压缩工具，文件经过压缩后一般会以.gz后缀结尾，与tar命令合用后即为.tar.gz后缀。

据统计，gzip命令对文本文件的压缩比率通常能达到60%~70%，压缩后可以很好的提升存储空间的使用率，还能够在网络传输文件时减少等待时间。

gunzip命令来自于英文词组”Gnu unzip“的缩写，其功能是用于解压提取文件内容。gunzip通常被用来解压那些被基于gzip格式压缩过的文件，也就是那些.gz结尾的压缩包。

1. 基本语法

gzip [参数] 文件 （功能描述：压缩文件，只能将文件压缩为*.gz 文件）

gunzip [参数] 文件.gz （功能描述：解压缩文件命令）

2. gzip 的常用参数

| 选项  |            功能             |
|:---:|:-------------------------:|
| -a  |        使用ASCII文字模式        |
| -d  |          解开压缩文件           |
| -f  |          强行压缩文件           |
| -k  |           保留原文件           |
| -l  |        列出压缩文件的相关信息        |
| -c  | 把压缩后的文件输出到标准输出设备，不去更动原始文件 |
| -r  | 递归处理，将指定目录下的所有文件及子目录一并处理  |
| -q  |          不显示警告信息          |

3. gunzip 的常用参数

|     选项      |                   功能                   |
|:-----------:|:--------------------------------------:|
|     -a      |              使用ASCII文字模式               |
|     -c      |            把解压后的文件输出到标准输出设备            |
|     -f      |  强行解开压缩文件，不理会文件名称或硬连接是否存在以及该文件是否为符号连接  |
|     -h      |                  在线帮助                  |
|     -l      |              列出压缩文件的相关信息               |
|     -L      |               显示版本与版权信息                |
|     -n      |  解压缩时，若压缩文件内含有远来的文件名称及时间戳记，则将其忽略不予处理   |
|     -N      | 解压缩时，若压缩文件内含有原来的文件名称及时间戳记，则将其回存到解开的文件上 |
|     -q      |                不显示警告信息                 |
|     -r      |        递归处理，将指定目录下的所有文件及子目录一并处理        |
| -S<压缩字尾字符串> |               更改压缩字尾字符串                |
|     -t      |              测试压缩文件是否正确无误              |
|     -v      |                显示指令执行过程                |
|     -V      |                 显示版本信息                 |

4. 经验技巧

只能压缩文件不能压缩目录

不保留原来的文件

同时多个文件会产生多个压缩包

5. 参考实例

将指定的文件进行压缩，压缩包默认会以“原文件名.gz”保存到当前工作目录下，原文件会被自动删除

```shell
gzip anaconda-ks.cfg
```

解压指定的压缩包文件，并显示解压过程。解压后的文件会保存在当前工作目录下，压缩包会被自动删除  

```shell
gzip -dv anaconda-ks.cfg.gz 
```

将指定的文件进行压缩，但是不删除原文件

```shell
gzip -k initial-setup-ks.cfg
```

显示指定文件的压缩信息

```shell
gzip -l initial-setup-ks.cfg.gz 
```

解压指定的压缩包文件

```shell
gunzip Filename.gz
```

解压指定的压缩包文件，并输出解压过程

```shell
gunzip -v Filename.gz
```

### 7.8.2 zip/unzip 压缩

1. 基本语法

zip [选项] XXX.zip 将要压缩的内容 （功能描述：压缩文件和目录的命令）

unzip [选项] XXX.zip （功能描述：解压缩文件）

2. 选项说明

| zip 选项 |  功能  |
|:------:|:----:|
|   -r   | 压缩目录 |

| uzip 选项 |      功能      |
|:-------:|:------------:|
| -d<目录>  | 指定解压后文件的存放目录 |

3. 经验技巧

zip 压缩命令在windows/linux都通用，可以压缩目录且保留源文件

4. 参考实例

压缩 houge.txt 和bailongma.txt，压缩后的名称为mypackage.zip

```shell
zip mypackage.zip houge.txt bailongma.txt
```

解压 mypackage.zip

```shell
unzip mypackage.zip
```

解压mypackage.zip到指定目录-d

```shell
unzip mypackage.zip -d /opt
```

### 7.8.3 tar 打包

1. 基本语法

tar [选项] XXX.tar.gz 将要打包进去的内容 （功能描述：打包目录，压缩后的文件格式.tar.gz）

2. 选项说明

| 选项  |     功能      |
|:---:|:-----------:|
| -c  | 产生.tar 打包文件 |
| -v  |   显示详细信息    |
| -f  |  指定压缩后的文件名  |
| -z  |   打包同时压缩    |
| -x  |  解包.tar 文件  |
| -C  |   解压到指定目录   |

3. 参考实例

压缩多个文件

```shell
tar -zcvf houma.tar.gz houge.txt bailongma.txt
```

压缩目录

```shell
tar -zcvf xiyou.tar.gz xiyou/
```

解压到当前目录

```shell
tar -zxvf houma.tar.gz
```

解压到指定目录

```shell
tar -zxvf xiyou.tar.gz -C /opt
```