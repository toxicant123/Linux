# 7.2 文件目录类

### 7.2.1 pwd 显示当前工作目录的绝对路径

pwd: print working directory 打印工作目录

1. 基本语法

pwd （功能描述：显示当前工作目录的绝对路径）

2. 选项说明

| 选项  |       功能        |
|:---:|:---------------:|
| -P  | 不受软连接的影响，显示绝对路径 |
| -L  |     显示逻辑路径      |


4. 参考实例

显示当前工作目录的绝对路径

```shell
pwd
#/root
```

### 7.2.2 ls 列出目录的内容

ls: list 列出目录内容

1. 基本语法

ls [选项] [目录或是文件]

2. 选项说明

|   选项    |                 功能                 |
|:-------:|:----------------------------------:|
|   -a    |     显示所有文件及目录 (包括以“.”开头的隐藏文件)      |
|   -l    |         使用长格式列出文件及目录的详细信息          |
|   -r    |       将文件以相反次序显示(默认依英文字母次序)        |
|   -t    |            根据最后的修改时间排序             |
|   -A    | 同 -a ，但不列出 “.” (当前目录) 及 “..” (父目录) |
|   -S    |              根据文件大小排序              |
|   -R    |             递归列出所有子目录              |
|   -d    |        查看目录的信息，而不是里面子文件的信息         |
|   -i    |           输出文件的inode节点信息           |
|   -m    |            水平列出文件，以逗号间隔            |
|   -X    |              按文件扩展名排序              |
| --color |            输出信息中带有着色效果             |
3. 显示说明

每行列出的信息依次是： 文件类型与权限 链接数 文件属主 文件属组 文件大小（用byte来表示） 建立或最近修改的时间 名字

4. 参考实例

查看当前目录的所有内容信息

```shell
ls -al
#总用量 44
#drwx------. 5 atguigu atguigu 4096 5 月 27 15:15 .
#drwxr-xr-x. 3 root root 4096 5 月 27 14:03 ..
#drwxrwxrwx. 2 root root 4096 5 月 27 14:14 hello
#-rwxrw-r--. 1 atguigu atguigu 34 5 月 27 14:20 test.txt
```

输出文件名称及inode属性块号码

```shell
ls -i
```

搭配通配符一起使用，输出指定目录中所有以sd开头的文件名称

```shell
ls /dev/sd*
```

依据文件大小进行排序，输出指定目录中文件属性详情信息

```shell
ls -Sl /etc
```

### 7.2.3 cd 切换目录

cd: Change Directory 切换路径，其功能是用于更改当前所处的工作目录，路径可以是绝对路径，也可以是相对路径，若省略不写则会跳转至当前使用者的家目录。

1. 基本语法

cd [参数] [目录名]

2. 参数说明

|    参数     |         功能         |
|:---------:|:------------------:|
|  cd 绝对路径  |        切换路径        |
|  cd 相对路径  |        切换路径        |
| cd ~或者 cd |      回到自己的家目录      |
|   cd -    |     回到上一次所在目录      |
|   cd ..   |    回到当前目录的上一级目录    |
|   cd -P   | 跳转到实际物理路径，而非快捷方式路径 |

3. 参考实例

使用绝对路径切换到 root 目录

```shell
cd /root/
```

使用相对路径切换到“公共的”目录

```shell
cd 公共的/
```

表示回到自己的家目录，亦即是 /root 这个目录

```shell
cd ~ 
```

cd- 回到上一次所在目录

```shell
cd -
``` 

表示回到当前目录的上一级目录，亦即是 “/root/公共的”的上一级目录的意思；

```shell
cd ..
```

### 7.2.4 mkdir 创建一个新的目录

mkdir: Make directory 建立目录

1. 基本语法

mkdir [选项] 要创建的目录

2. 选项说明

| 选项  |       功能       |
|:---:|:--------------:|
| -p  |     创建多层目录     |
| -m  | 建立目录的同时设置目录的权限 |
| -z  |    设置安全上下文     |
| -v  |   显示目录的创建过程    |

3. 参考实例

创建一个目录

```shell
mkdir xiyou
mkdir xiyou/mingjie
```

创建一个多级目录

```shell
mkdir -p xiyou/dssz/meihouwang
```

在当前工作目录中，一次性创建多个目录文件

```shell
mkdir dir3 dir4 dir5
```

在当前工作目录中，创建一个目录文件并设置700权限，不让除所有主以外任何人读、写、执行它

```shell
mkdir -m 700 dir2
```

### 7.2.5 rmdir 删除一个空的目录

rmdir: Remove directory 移除目录

rmdir命令只能删除空目录。当要删除非空目录时，就要使用带有“-R”选项的rm命令。

rmdir命令的“-p”参数可以递归删除指定的多级目录，但是要求每个目录也必须是空目录。

1. 基本语法

rmdir rmdir [参数] [目录名称]

2. 常用参数

| 选项  |              功能               |
|:---:|:-----------------------------:|
| -p  | 用递归的方式删除指定的目录路径中的所有父级目录，非空则报错 |
| -v  |          显示命令的详细执行过程          |

3. 参考实例

删除一个空的文件夹

```shell
rmdir xiyou/dssz/meihouwang
```

递归删除指定的目录树

```shell
rmdir -p dir/dir_1/dir_2
```

显示指令详细执行过程

```shell
rmdir -v dir
```

### 7.2.6 touch 创建空文件

touch命令的功能是用于创建空文件与修改时间戳。如果文件不存在，则会创建出一个空内容的文本文件；如果文件已经存在，则会对文件的Atime（访问时间）和Ctime（修改时间）进行修改操作

1. 基本语法

touch [参数] 文件

2. 常用参数

|     选项      |            功能             |
|:-----------:|:-------------------------:|
|     -a      |        改变档案的读取时间记录        |
|     -m      |        改变档案的修改时间记录        |
|     -r      | 使用参考档的时间记录，与 --file 的效果一样 |
|     -c      |          不创建新文件           |
|     -d      |    设定时间与日期，可以使用各种不同的格式    |
|     -t      |  设定档案的时间记录，格式与 date 命令相同  |
|   --help    |          显示帮助信息           |
|  --version  |          列出版本讯息           |


3. 参考实例

创建出一个指定名称的空文件

```shell
touch xiyou/dssz/sunwukong.txt
```

修改指定文件的查看时间和修改时间

```shell
touch -d "2022-05-08 15:44" anaconda-ks.cfg 
```

### 7.2.7 cp 复制文件或目录

cp命令来自于英文单词copy的缩写，用于将一个或多个文件或目录复制到指定位置，亦常用于文件的备份工作

1. 基本语法

cp [参数] 源文件 目标文件 （功能描述：复制source文件到dest）

2. 选项说明

| 选项  |                       功能                       |
|:---:|:----------------------------------------------:|
| -f  |               若目标文件已存在，则会直接覆盖原文件               |
| -i  |               若目标文件已存在，则会询问是否覆盖                |
| -p  |                 保留源文件或目录的所有属性                  |
| -r  |                   递归复制文件和目录                    |
| -d  | 当复制符号连接时，把目标文件或目录也建立为符号连接，并指向与源文件或目录连接的原始文件或目录 |
| -l  |                对源文件建立硬连接，而非复制文件                |
| -s  |               对源文件建立符号连接，而非复制文件                |
| -b  |               覆盖已存在的文件目标前将目标文件备份               |
| -v  |                详细显示cp命令执行的操作过程                 |

4. 经验技巧

强制覆盖不提示的方法：\cp [选项] source dest

-r参数用于递归操作，复制目录时若忘记加则会直接报错，而-f参数则用于当目标文件已存在时会直接覆盖不再询问，这两个参数尤为常用。

5. 参考实例

复制文件

```shell
cp xiyou/dssz/suwukong.txt xiyou/mingjie/
```

递归复制整个文件夹

```shell
cp -r xiyou/dssz/ ./
```

将某个文件复制到/etc目录中，并覆盖已有文件，不进行询问

```shell
cp -f ks.cfg /etc
```

将多个文件一同复制到/etc目录中，如已有目标文件名称则默认询问是否覆盖

```shell
cp anaconda-ks.cfg ks.cfg /etc
```

复制某个文件时，保留其原始权限及用户归属信息

```shell
cp -a kickstart.cfg ks.cfg
```

### 7.2.8 rm 删除文件或目录

rm命令来自于英文单词remove的缩写，其功能是用于删除文件或目录，一次可以删除多个文件，或递归删除目录及其内的所有子文件

1. 基本语法

rm [选项] deleteFile （功能描述：递归删除目录中所有内容）

2. 选项说明

|  选项  |         功能          |
|:----:|:-------------------:|
| -r/R |     递归删除目录中所有内容     |
|  -f  | 强制执行删除操作，而不提示用于进行确认 |
|  -v  |     显示指令的详细执行过程     |
|  -i  |    	删除前会询问用户是否操作    |

3. 参考实例

删除目录中的内容

```shell
rm xiyou/mingjie/sunwukong.txt
```

递归删除目录中所有内容

```shell
rm -rf dssz/
```

### 7.2.9 mv 移动文件与目录或重命名

mv命令来自于英文单词move的缩写，其功能与英文含义相同，用于对文件进行剪切和重命名。

1. 基本语法

mv [参数] 源文件 目标文件

2. 常用参数

| 选项  |               功能               |
|:---:|:------------------------------:|
| -i  |       若存在同名文件，则向用户询问是否覆盖       |
| -f  |        覆盖已有文件时，不进行任何提示         |
| -b  |       当文件存在时，覆盖前为其创建一个备份       |
| -u  | 当源文件比目标文件新，或者目标文件不存在时，才执行移动此操作 |

3. 参考实例

重命名

```shell
mv xiyou/dssz/suwukong.txt xiyou/dssz/houge.txt
```

移动文件

```shell
mv xiyou/dssz/houge.txt ./
```

将某个文件移动到/etc目录中，保留文件原始名称

```shell
mv ks.cfg /etc
```

将/home目录中所有的文件都移动到当前工作目录中，遇到已存在文件则直接覆盖

```shell
mv -f /home/* .
```

### 7.2.10 cat 查看文件内容

cat命令来自于英文单词concatenate的缩写，其功能是用于查看文件内容。在Linux系统中有很多用于查看文件内容的命令，例如more、tail、head……等等，每个命令都有各自的特点。cat命令适合查看内容较少的、纯文本的文件

对于内容较多的文件，使用cat命令查看后会在屏幕上快速滚屏，用户往往看不清所显示的具体内容，只好按Ctrl+c键中断命令的执行，所以对于大文件，可以使用more命令

1. 基本语法

cat [参数] 要查看的文件

2. 常用参数

|    选项     |              功能              |
|:---------:|:----------------------------:|
|    -n     |         显示行数（空行也编号）          |
|    -s     |       显示行数（多个空行算一个编号）        |
|    -b     |         显示行数（空行不编号）          |
|    -E     |          每行结束处显示$符号          |
|    -T     |        将TAB字符显示为 ^I符号        |
|    -v     | 使用 ^ 和 M- 引用，除了 LFD 和 TAB 之外 |
|    -e     |          等价于”-vE”组合          |
|    -t     |          等价于”-vT”组合          |
|    -A     |          等价于 -vET组合          |
|  --help   |            显示帮助信息            |
| --version |            显示版本信息            |

3. 参考实例

查看文件内容并显示行号

```shell
cat -n houge.txt
```

搭配空设备文件和输出重定向操作符，将某个文件内容清空

```shell
cat /dev/null > anaconda-ks.cfg 
```

### 7.2.11 more 文件内容分屏查看器

more 指令是一个基于 VI 编辑器的文本过滤器，它以全屏幕的方式按页显示文本文件的内容。more 指令中内置了若干快捷键，详见操作说明。

1. 基本语法

more [参数] [文件]

2. 常用参数

|    选项     |                       功能                       |
|:---------:|:----------------------------------------------:|
|   -num    |                   指定每屏显示的行数                    |
|    -l     | more在通常情况下把 ^L 当作特殊字符, 遇到这个字符就会暂停,-l选项可以阻止这种特性 |
|    -f     |               计算实际的行数，而非自动换行的行数                |
|    -p     |               先清除屏幕再显示文本文件的剩余内容                |
|    -c     |             与-p相似，不滚屏，先显示内容再清除旧内容              |
|    -s     |                  多个空行压缩成一行显示                   |
|    -u     |                     禁止下划线                      |
| +/pattern |       在每个文档显示前搜寻该字(pattern)，然后从该字串之后开始显示       |
|   +num    |                  从第 num 行开始显示                  |

3. 操作说明

|     操作      |            功能说明            |
|:-----------:|:--------------------------:|
| 空白键 (space) |          代表向下翻一页           |
|    Enter    |         代表向下翻『一行』          |
|     q\Q     |   代表立刻离开 more ，不再显示该文件内容   |
|   Ctrl+F    |           向下滚动一屏           |
|   Ctrl+B    |           返回上一屏            |
|      =      |          输出当前行的行号          |
|     :f      |        输出文件名和当前行的行号        |
|      \      | 接着输入一个模式，可以在文本中寻找下一个相匹配的模式 |
|      H      |           显示帮助屏            |
|      B      |          显示上一屏内容           |
|      V      |          调用vi编辑器           |
|      !      |       调用Shell，并执行命令        |

3. 参考实例

采用more查看文件

```shell
more smartd.conf
```

显示文件file的内容，显示之前先清屏，附已显示的百分比

```shell
more -dc file 
```

显示文件file的内容，每10行显示一次，而且在显示之前先清屏

```shell
more -c -10 file 
```

从第 20 行开始显示 file 之文档内容

```shell
more +20 file 
```

### 7.2.12 less 分屏显示文件内容

less 指令用来分屏查看文件内容，它的功能与 more 指令类似，但是比 more 指令更加强大，支持各种显示终端。less 指令在显示文件内容时，并不是一次将整个文件加载之后才显示，而是根据显示需要加载内容，对于显示大型文件具有较高的效率。

浏览文字档案的内容，用less命令显示文件时，PageUp键向上翻页，PageDown键向下翻页，要退出less程序，应按Q键。

less的作用与more十分相似，不同点为less命令允许用户向前或向后浏览文件，而more命令只能向前浏览 。

1. 基本语法

less [参数] [文件]

2. 常用参数

| 选项  |             功能             |
|:---:|:--------------------------:|
| -b  |          置缓冲区的大小           |
| -e  |       当文件显示结束后，自动离开        |
| -f  | 强迫打开特殊文件，例如外围设备代号、目录和二进制文件 |
| -g  |        只标志最后搜索的关键词         |
| -i  |         忽略搜索时的大小写          |
| -m  |       显示类似more命令的百分比       |
| -N  |          显示每行的行号           |
| -o  |   将less 输出的内容在指定文件中保存起来    |
| -Q  |           不使用警告音           |
| -s  |         显示连续空行为一行          |
| -S  |     在单行显示较长的内容，而不换行显示      |
| -x  |     将TAB字符显示为指定个数的空格字符     |

4. 操作说明

|     操作     |           功能说明            |
|:----------:|:-------------------------:|
|    空白键     |          向下翻动一页           |
| [pagedown] |          向下翻动一页           |
|  [pageup]  |          向上翻动一页           |
|    /字串     | 向下搜寻『字串』的功能；n：向下查找；N：向上查找 |
|    ?字串     | 向上搜寻『字串』的功能；n：向上查找；N：向下查找 |
|     q      |       离开 less 这个程序        |

3. 经验技巧

用SecureCRT时[pagedown]和[pageup]可能会出现无法识别的问题。

4. 参考实例

采用less查看文件

```shell
less smartd.conf
```

### 7.2.13 echo 输出内容到控制台

echo是用于在终端设备上输出指定字符串或变量提取后值的命令，能够给用户一些简单的提醒信息，也可以将输出的指定字符串内容同管道符一起传递给后续命令作为标准输入信息再来进行二次处理，又或者同输出重定向符一起操作，将信息直接写入到文件中。

如需提取变量值，需在变量名称前加入$符号做提取，变量名称一般均为大写形式。  

1. 基本语法

echo 参数 [输出内容]

2. 常用参数

| 参数  |        功能         |
|:---:|:-----------------:|
| -n  |     不输出结尾的换行符     |
| -e  |   支持反斜线控制的字符转换    |
| -E  | 禁止反斜杠转移，与-e参数功能相反 |

3. 控制字符

输出内容可以加入控制字符

| 控制字符 |      作用       |
|:----:|:-------------:|
| \\\\ |     输出\本身     |
|  \n  |      换行符      |
|  \t  | 制表符，也就是 Tab 键 |

4. 参考实例

```shell
echo "hello\tworld"
#hello\tworld

echo -e "hello\tworld"
#hello world
```

查看所有环境变量

```shell
echo $
```

查看环境变量PAHT的值

```shell
echo $PATH
```

### 7.2.14 head 显示文件头部内容

head 用于显示文件的开头部分内容，默认情况下 head 指令显示文件的前 10 行内容。

1. 基本语法

head [参数] [文件]

2. 选项说明

|   选项   |      功能      |
|:------:|:------------:|
| -n<行数> | 指定显示头部内容的行数  |
|   -c   | 指定显示头部内容的字符数 |
|   -v   | 总是显示文件名的头信息  |
|   -q   |  不显示文件名的头信息  |


3. 参考实例

查看文件的头2行

```shell
head -n 2 smartd.conf
```

显示文件名信息，并显示文件前两行

```shell
head -v -n 2 test.txt
```

### 7.2.15 tail 输出文件尾部内容

tail 用于输出文件中尾部的内容，默认情况下 tail 指令显示文件的后 10 行内容。

1. 基本语法

tail [参数] 文件

2. 选项说明

|     选项      |                    功能                     |
|:-----------:|:-----------------------------------------:|
|     -c      |            输出文件尾部的N（N为整数）个字节内容            |
|     -f      |               持续显示文件最新追加的内容               |
|   -F <N>    |    与选项“-follow=name”和“--retry”连用时功能相同     |
|   -n <N>    |             输出文件的尾部N（N位数字）行内容             |
|   --retry   | 即是在tail命令启动时，文件不可访问或者文件稍后变得不可访问，都始终尝试打开文件 |
| --pid=<进程号> |    与“-f”选项连用，当指定的进程号的进程终止后，自动退出tail命令     |
|   --help    |                 显示指令的帮助信息                 |
|  --version  |                 显示指令的版本信息                 |

3. 参考实例

查看文件尾 1 行内容

```shell
tail -n 1 smartd.conf
```

实时追踪该档的所有更新

```shell
tail -f houge.txt
```

### 7.2.16 > 输出重定向和 >> 追加

1. 基本语法

* ls -l > 文件 （功能描述：列表的内容写入文件 a.txt 中（覆盖写））
* ls -al >> 文件 （功能描述：列表的内容追加到文件 aa.txt 的末尾）
* cat 文件 1 > 文件 2 （功能描述：将文件 1 的内容覆盖到文件 2）
* echo “内容” >> 文件

2. 参考实例

将 ls 查看信息写入到文件中

```shell
ls -l > houge.txt
```

将 ls 查看信息追加到文件中

```shell
ls -l >> houge.txt
```

采用 echo 将 hello 单词追加到文件中

```shell
echo hello >> houge.txt
```

### 7.2.17 ln 软链接

软链接也称为符号链接，类似于 windows 里的快捷方式，有自己的数据块，主要存放了链接其他文件的路径。

1. 基本语法

   ln -s [原文件或目录] [软链接名] （功能描述：给原文件创建一个软链接）

2. 经验技巧

删除软链接： rm -rf 软链接名，而不是 rm -rf 软链接名/

如果使用 rm -rf 软链接名/ 删除，会把软链接对应的真实目录下内容删掉

查询：通过 ll 就可以查看，列表属性第 1 位是 l，尾部会有位置指向。

3. 参考实例

创建软连接

```shell
mv houge.txt xiyou/dssz/
ln -s xiyou/dssz/houge.txt ./houzi
ll
#lrwxrwxrwx. 1 root root 20 6 月 17 12:56 houzi -> xiyou/dssz/houge.txt
```

删除软连接(注意不要写最后的/)

```shell
rm -rf houzi
```

进入软连接实际物理路径

```shell
ln -s xiyou/dssz/ ./dssz
cd -P dssz/
```

### 7.2.18 history 查看已经执行过历史命令

history命令用于显示用户以前执行过的历史命令，并且能对历史命令进行追加和删除等操作

1. 基本语法

history [参数] [目录]

2. 常用参数

| 选项  |                         功能                          |
|:---:|:---------------------------------------------------:|
| -a  |    将当前shell会话的历史命令追加到命令历史文件中,命令历史文件是保存历史命令的配置文件     |
| -c  |                     清空当前历史命令列表                      |
| -d  |                  删除历史命令列表中指定序号的命令                   |
| -n  |           从命令历史文件中读取本次Shell会话开始时没有读取的历史命令           |
| -r  |             读取命令历史文件到当前的Shell历史命令内存缓冲区              |
| -s  | 将指定的命令作为单独的条目加入命令历史内存缓冲区。在执行添加之前先删除命令历史内存缓冲区中最后一条命令 |
| -w  |            把当前的shell历史命令内存缓冲区的内容写入命令历史文件            |

4. 参考实例

查看已经执行过的历史命令

```shell
history
```

调用历史命令（调用历史记录中第1124条记录）

```shell
!1124
```

将本次登录的命令写入历史文件中

```shell
history -w
```

清空当前历史命令列表

```shell
history -c 
```