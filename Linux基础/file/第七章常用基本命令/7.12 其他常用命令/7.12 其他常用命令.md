# 7.12 其他常用命令

### 7.12.1 ping 测试主机间网络连通性

ping命令的功能是用于测试主机间网络连通性，发送出基于ICMP传输协议的数据包，要求对方主机予以回复，若对方主机的网络功能没有问题且防火墙放行流量，则就会回复该信息，我们也就可得知对方主机系统在线并运行正常了。

不过值得我们注意的是Linux与Windows相比有一定差异，Windows系统下的ping命令会发送出去4个请求后自动结束该命令；而Linux系统则不会自动终止，需要用户手动按下组合键“Ctrl+c”才能结束，或是发起命令时加入-c参数限定发送个数

1. 基本语法

ping [参数] 目标主机

2. 常用参数

| 参数  |          功能          |
|:---:|:--------------------:|
| -d  | 使用Socket的SO_DEBUG功能  |
| -c  |      指定发送报文的次数       |
| -i  |     指定收发信息的间隔时间      |
| -I  |    使用指定的网络接口送出数据包    |
| -l  | 设置在送出要求信息之前，先行发出的数据包 |
| -n  |        只输出数值         |
| -p  |     设置填满数据包的范本样式     |
| -q  |      不显示指令执行过程       |
| -R  |        记录路由过程        |
| -s  |       设置数据包的大小       |
| -t  |     设置存活数值TTL的大小     |
| -v  |     详细显示指令的执行过程      |

3. 参考实例

测试与指定网站服务器之间的网络连通性（需手动按下“Ctrl+c”组合键结束命令）

```shell
ping www.linuxcool.com
```

测试与指定主机之间的网络连通性，发送3次请求包，每次间隔0.2秒，最长等待时间为3秒

```shell
ping -c 3 -i 0.2 -W 3 192.168.10.10
```

### 7.12.2 wget 下载网络文件

wget命令来自于英文词组”web get“的缩写，其功能是用于从指定网址下载网络文件。wget命令非常稳定，一般即便网络波动也不会导致下载失败，而是不断的尝试重连，直至整个文件下载完毕。

wget命令支持如HTTP、HTTPS、FTP等常见协议，可以在命令行中直接下载网络文件。

1. 基本语法

wget [参数] 网址

2. 常用参数

|        参数         |    功能     |
|:-----------------:|:---------:|
|        -V         |  显示版本信息   |
|        -h         |  显示帮助信息   |
|        -b         | 启动后转入后台执行 |
|        -c         |  支持断点续传   |
|        -O         |  定义本地文件名  |
|      -e <命令>      |  执行指定的命令  |
| --limit-rate=<速率> |  限制下载速度   |

3. 参考实例

下载指定的网络文件

```shell
wget https://www.linuxprobe.com/docs/LinuxProbe.pdf
```

下载指定的网络文件，并定义保存在本地的文件名称

```shell
wget -O Book.pdf https://www.linuxprobe.com/docs/LinuxProbe.pdf
```

下载指定的网络文件，限速最高每秒300k

```shell
wget --limit-rate=300k https://www.linuxprobe.com/docs/LinuxProbe.pdf
```

下载指定的网络文件，将任务放至后台执行

```shell
wget -b https://www.linuxprobe.com/docs/LinuxProbe.pdf
```

### 7.12.3 init 切换系统运行级别

init命令是Linux下的进程初始化工具，init进程是所有Linux进程的父进程，它的进程号为1。init命令是Linux操作系统中不可缺少的程序之一，init进程是Linux内核引导运行的，是系统中的第一个进程

1. 基本语法

init [参数]

2. 常用参数

| 参数  |   功能    |
|:---:|:-------:|
|  0  |   关机    |
|  1  |   单用户   |
|  2  |   多用户   |
|  3  | 完全多用户模式 |
|  5  |  图形界面   |
|  6  |   重启    |

3. 参考实例

关闭服务器

```shell
init 0
```

切换单用户模式

```shell
init 1
```

### 7.12.4 watch 周期性执行命令

watch命令以周期性的方式执行给定的指令，指令输出以全屏方式显示。watch是一个非常实用的命令，基本所有的Linux发行版都带有这个小工具，如同名字一样，watch可以帮你监测一个命令的运行结果，省得你一遍遍的手动运行。

1. 基本语法

watch [参数] [命令]

2. 常用参数

|        参数        |                                         功能                                          |
|:----------------:|:-----------------------------------------------------------------------------------:|
|  -n/--interval   |                      watch默认每2秒运行一下程序，可以用-n或-interval来指定间隔的时间                       |
| -d/--differences | 用-d或--differences 选项watch 会高亮显示变化的区域。 而-d=cumulative选项会把变动过的地方(不管最近的那次有没有变动)都高亮显示出来 |
|  -t/--no-title   |                            关闭watch命令在顶部的时间间隔、命令、当前时间的输出                             |
|    -h/--help     |                                       查看帮助文档                                        |

3. 参考实例

重复执行uptime命令

```shell
watch uptime
```

每隔一秒高亮显示网络链接数的变化情况

```shell
watch -n 1 -d netstat -ant
```

每10秒一次输出系统的平均负载

```shell
watch -n 10 'cat /proc/loadavg'
```

监测磁盘inode和block数目变化情况

```shell
watch -n 1 "df -i;df"
```

监测当前目录中test.txt文件的变化

```shell
watch -d 'ls -l|grep test.txt'
```
