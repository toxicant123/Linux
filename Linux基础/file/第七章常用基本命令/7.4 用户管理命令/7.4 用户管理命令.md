# 7.4 用户管理命令

### 7.4.1 useradd 添加新用户

1. 基本语法

useradd 用户名 （功能描述：添加新用户）

useradd -g 组名 用户名 （功能描述：添加新用户到某个组）

2. 案例实操

添加一个用户

```shell
useradd tangseng
```

### 7.4.2 passwd 设置用户密码

1. 基本语法

passwd 用户名 （功能描述：设置用户密码）

2. 案例实操

设置用户的密码

```shell
passwd tangseng
```

### 7.4.3 id 查看用户

1. 基本语法

id 用户名

2. 案例实操

查看用户

```shell
id tangseng
```

### 7.4.4 cat /etc/passwd 查看创建了哪些用户

1. 案例实操

```shell
cat /etc/passwd
```

### 7.4.5 su 切换用户

su: swith user 切换用户

1. 基本语法

su 用户名称 （功能描述：切换用户，只能获得用户的执行权限，不能获得环境变量）

su - 用户名称 （功能描述：切换到用户并获得该用户的环境变量及执行权限）

2. 案例实操

切换用户

```shell
sudu tangseng
```

### 7.4.6 userdel 删除用户

1. 基本语法

* userdel 用户名 （功能描述：删除用户但保存用户主目录）

* userdel -r 用户名 （功能描述：用户和用户主目录，都删除）

2. 选项说明

| 选项  |          功能           |
|:---:|:---------------------:|
| -r  | 删除用户的同时，删除与用户相关的所有文件。 |

3. 案例实操

* 删除用户（保存用户主目录）

```shell
userdel tangseng
```

* 删除用户和用户主目录，都删除

```shell
userdel -r zhubajie
```

### 7.4.7 who 查看登录用户信息

1. 基本语法

* whoami （功能描述：显示自身用户名称）

* who am i （功能描述：显示登录用户的用户名以及登陆时间）

2. 案例实操

* 显示自身用户名称

```shell
whoami
```

* 显示登录用户的用户名

```shell
who am i
```

### 7.4.8 sudo 设置普通用户具有 root 权限

1. 添加 atguigu 用户，并对其设置密码

```shell
useradd atguigu
passwd atguigu
```

2. 修改配置文件

```shell
vim /etc/sudoers
```

修改 /etc/sudoers 文件，找到下面一行(91 行)，在 root 下面添加一行，如下所示：

```text
## Allow root to run any commands anywhere
root    ALL=(ALL) ALL
atguigu ALL=(ALL) ALL
```

或者配置成采用 sudo 命令时，不需要输入密码

```text
## Allow root to run any commands anywhere
root    ALL=(ALL) ALL
atguigu ALL=(ALL) NOPASSWD:ALL
```

修改完毕，现在可以用 atguigu 帐号登录，然后用命令 sudo ，即可获得 root 权限进行操作。

### 7.4.9 usermod 修改用户

1. 基本语法

usermod -g 用户组 用户名

2. 选项说明

| 选项  |               功能                |
|:---:|:-------------------------------:|
| -g  | 修改用户的初始登录组，给定的组必须存在。默认组 id 是 1。 |

3. 案例实操

将用户加入到用户组

```shell
usermod -g root zhubajie
```