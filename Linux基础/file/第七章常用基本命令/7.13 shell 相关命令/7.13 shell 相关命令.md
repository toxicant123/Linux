# 7.13 shell 相关命令

### 7.13.1 bash 命令终端解释器

bash命令来自于英文词组“Bourne shell”的缩写，其功能是命令终端解释器。bash是绝大多数Linux系统默认的命令终端解释器，能够处理用户所输入的命令，以及执行指定的Shell脚本文件。

1. 基本语法

bash [参数] 文件

2. 常用参数

| 参数  |    功能     |
|:---:|:---------:|
| -n  | 检测脚本是否正确本 |
| -x  |  输出执行过程   |
| -c  | 从字符串中读入命令 |

3. 参考实例

使用-n参数检查脚本语法时候正确

```shell
bash -n linuxcool.sh
```

使用-x参数执行linuxcool.sh脚本并输出执行过程

```shell
bash -x linuxcool.sh 
#+ pwd
#/root
#+ uptime
# 16:09:14 up 6 min,  1 user,  load average: 0.24, 0.09, 0.03
```

### 7.13.2 declare 声明shell变量

declare命令用于定义shell变量，但declare定义的变量仅能在当前shell环境中起作用，切换shell环境后将无效。

1. 基本语法

declare [参数] [目录]

2. 常用参数

| 参数  |                功能                |
|:---:|:--------------------------------:|
| -a  |              声明数组变量              |
| -f  |              仅显示函数               |
| -F  |             不显示函数定义              |
| -i  |        先计算表达式，把结果赋给所声明变量         |
| -p  | 显示给定变量的定义的方法和值，当使用此选项时，其他的选项将被忽略 |
| -r  |              定义只读变量              |
| -x  |        将指定的Shell变量转换成环境变量        |

3. 参考实例

显示已定义的变量

```shell
declare 
```

定义新的Shell变量

```shell
declare var1="hello"
```

使用“-i”定义新的变量

```shell
declare -i var2=100+200
```

使用“-p” 显示变量var1和var2的定义

```shell
declare -p var1 var2
```

显示所有的环境变量

```shell
declare -x
```

### 7.13.3 set 设置shell

set命令能设置所使用shell的执行方式，可依照不同的需求来做设置。

1. 基本语法

set [参数]

2. 常用参数

| 参数  |                   功能                    |
|:---:|:---------------------------------------:|
| -a  |           标示已修改的变量，以供输出至环境变量            |
| -b  |            使被中止的后台程序立刻回报执行状态            |
| -C  |           转向所产生的文件无法覆盖已存在的文件            |
| -d  | Shell预设会用杂凑表记忆使用过的指令，以加速指令的执行。使用-d参数可取消 |
| -e  |          若指令传回值不等于0，则立即退出shell          |
| -f  |                 取消使用通配符                 |
| -h  |               自动记录函数的所在位置               |
| -k  |          指令所给的参数都会被视为此指令的环境变量           |
| -l  |              记录for循环的变量名称               |
| -m  |                 使用监视模式                  |

3. 参考实例

使用declare命令定义一个新的环境变量”mylove”，并且将其值设置为”Visual C++”，输入如下命令

```shell
declare mylove='Visual C++' 
```

再使用set命令将新定义的变量输出为环境变量，输入如下命令

```shell
set -a mylove  
```

执行该命令后，将会新添加对应的环境变量。用户可以使用env命令和grep命令分别显示和搜索环境变量”mylove”，输入命令如下

```shell
env | grep mylove 
```