# 10.8 函数

## 8.1 系统函数

### 8.1.1 basename

basename 命令会删掉所有的前缀包括最后一个（‘/’）字符，然后将字符串显示出来

可以理解为取路径里的文件名称

1. 基本语法

basename [string / pathname] [suffix] 

suffix 为后缀，如果 suffix 被指定了，basename 会将 pathname 或 string 中的 suffix 去掉

2. 参考实例

截取该/home/atguigu/banzhang.txt 路径的文件名称

```shell
basename /home/atguigu/banzhang.txt
#banzhang.txt
basename /home/atguigu/banzhang.txt .txt
#banzhang
```

### 8.1.2 dirname

功能描述：从给定的包含绝对路径的文件名中去除文件名（非目录的部分），然后返回剩下的路径（目录的部分）

dirname 可以理解为取文件路径的绝对路径名称

1. 基本语法

dirname 文件绝对路径

2. 获取 banzhang.txt 文件的路径

获取 banzhang.txt 文件的路径

```shell
dirname /home/atguigu/banzhang.txt
#/home/atguigu
```

## 8.2 自定义函数

1. 基本语法

方括号`[]`内的内容可以省略不写

```shell
[ function ] funname[()]{
    Action;
    [return int;]
}
```

2. 经验技巧

* 必须在调用函数地方之前，先声明函数，shell 脚本是逐行运行。不会像其它语言一样先编译。
* 函数返回值，只能通过$?系统变量获得，可以显示加：return 返回，如果不加，将以最后一条命令运行结果，作为返回值。return 后跟数值 n(0-255)
* 可以通过`echo`将想要返回的结果输出，再在调用函数的地方使用`a=$(func())`的方式获取结果

3. 参考实例

计算两个输入参数的和



```shell
touch fun.sh
vim fun.sh
##!/bin/bash
#function sum()
#{
#s=0
#s=$[$1+$2]
#echo "$s"
#}
#read -p "Please input the number1: " n1;
#read -p "Please input the number2: " n2;
#sum $n1 $n2;
chmod 777 fun.sh
./fun.sh
#Please input the number1: 2
#Please input the number2: 5
#7
```

这种写法使用了echo进行传值，可以计算大于255的数字

1.输入输出重定向
2.函数返回值如何取到
3.安装JDK、MySQL等等
4.通配符
